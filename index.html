<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erro de Conexão - Opulensys</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parallax.js/1.5.0/parallax.min.js"></script>
    <style>
        .parallax-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        .parallax-layer {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .progress-bar {
            width: 300px;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress {
            width: 0;
            height: 100%;
            background-color: #4CAF50;
            transition: width 0.5s;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="parallax-container" id="scene">
        <div class="parallax-layer" data-depth="0.1" style="background-image: url('https://source.unsplash.com/random/1920x1080?technology');"></div>
        <div class="parallax-layer" data-depth="0.2" style="background-image: url('https://source.unsplash.com/random/1920x1080?error');"></div>
    </div>

    <div class="container mx-auto px-4 py-8 relative z-10">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-2xl mx-auto">
            <h1 class="text-4xl font-bold mb-4 text-red-600 animate__animated animate__fadeIn">Oops! Erro de Conexão</h1>
            <p class="text-lg mb-6 animate__animated animate__fadeIn animate__delay-1s">Parece que houve um erro ao conectar com o servidor da Opulensys. Por favor, tente novamente.</p>
            <img src="https://source.unsplash.com/random/800x400?error" alt="Erro de conexão" class="w-full rounded-lg mb-6 animate__animated animate__zoomIn animate__delay-2s">
            <button id="reconnectBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded animate__animated animate__bounceIn animate__delay-3s">
                <i class="fas fa-sync-alt mr-2"></i> Tentar Reconectar
            </button>
        </div>
    </div>

    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="text-center">
            <div class="progress-bar">
                <div id="progress" class="progress"></div>
            </div>
            <p id="loadingText" class="text-white mt-4 text-xl">Carregando... <span id="progressPercentage">0%</span></p>
        </div>
    </div>

    <div id="statusScreen" class="hidden bg-gray-100 min-h-screen">
        <div class="container mx-auto px-4 py-8">
            <h2 class="text-3xl font-bold mb-6 text-center">Status do Sistema</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold mb-4">Sistemas (20)</h3>
                    <ul id="systemList" class="space-y-2"></ul>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold mb-4">Componentes (10)</h3>
                    <ul id="componentList" class="space-y-2"></ul>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p class="text-lg mb-4">Erro reconhecido pela Opulensys Maintenance</p>
                <button id="backToErrorBtn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                    <i class="fas fa-arrow-left mr-2"></i> Voltar para a Página de Erro
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const scene = document.getElementById('scene');
            new Parallax(scene);

            setTimeout(() => {
                Swal.fire({
                    title: 'Erro de Conexão',
                    text: 'Oops... Parece que houve um erro ao conectar com o servidor da Opulensys. Por favor, tente novamente.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }, 2000);

            const reconnectBtn = document.getElementById('reconnectBtn');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const progress = document.getElementById('progress');
            const progressPercentage = document.getElementById('progressPercentage');
            const statusScreen = document.getElementById('statusScreen');
            const backToErrorBtn = document.getElementById('backToErrorBtn');

            reconnectBtn.addEventListener('click', () => {
                loadingOverlay.classList.remove('hidden');
                let width = 0;
                const interval = setInterval(() => {
                    if (width >= 50) {
                        clearInterval(interval);
                        Swal.fire({
                            title: 'Impossível Continuar',
                            text: 'Não foi possível estabelecer uma conexão com o servidor.',
                            icon: 'warning',
                            showCancelButton: true,
                            confirmButtonText: 'Verificar Status',
                            cancelButtonText: 'Fechar'
                        }).then((result) => {
                            loadingOverlay.classList.add('hidden');
                            if (result.isConfirmed) {
                                showStatusScreen();
                            }
                        });
                    } else {
                        width++;
                        progress.style.width = width + '%';
                        progressPercentage.textContent = width + '%';
                    }
                }, 120);
            });

            backToErrorBtn.addEventListener('click', () => {
                statusScreen.classList.add('hidden');
                document.querySelector('.container').classList.remove('hidden');
            });

            function showStatusScreen() {
                document.querySelector('.container').classList.add('hidden');
                statusScreen.classList.remove('hidden');
                generateStatusLists();
            }

            function generateStatusLists() {
                const systemList = document.getElementById('systemList');
                const componentList = document.getElementById('componentList');
                const systems = ['Sistema 1', 'Sistema 2', 'Sistema 3', 'Sistema 4', 'Sistema 5', 'Sistema 6', 'Sistema 7', 'Sistema 8', 'Sistema 9', 'Sistema 10', 'Sistema 11', 'Sistema 12', 'Sistema 13', 'Sistema 14', 'Sistema 15', 'Sistema 16', 'Sistema 17', 'Sistema 18', 'Sistema 19', 'Sistema 20'];
                const components = ['Componente 1', 'Componente 2', 'Componente 3', 'Componente 4', 'Componente 5', 'Componente 6', 'Componente 7', 'Componente 8', 'Componente 9', 'Componente 10'];

                systems.forEach(system => {
                    const li = document.createElement('li');
                    const status = Math.random() < 0.5 ? 'online' : 'offline';
                    li.innerHTML = `<span class="font-medium">${system}</span>: <span class="${status === 'online' ? 'text-green-500' : 'text-red-500'}">${status}</span> <i class="fas fa-${status === 'online' ? 'check-circle text-green-500' : 'times-circle text-red-500'}"></i>`;
                    systemList.appendChild(li);
                });

                components.forEach(component => {
                    const li = document.createElement('li');
                    const status = Math.random() < 0.5 ? 'online' : 'offline';
                    li.innerHTML = `<span class="font-medium">${component}</span>: <span class="${status === 'online' ? 'text-green-500' : 'text-red-500'}">${status}</span> <i class="fas fa-${status === 'online' ? 'check-circle text-green-500' : 'times-circle text-red-500'}"></i>`;
                    componentList.appendChild(li);
                });
            }
        });
    </script>
</body>
</html>
